(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{213:function(e,t,n){var content=n(238);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("4f199b8b",content,!0,{sourceMap:!1})},214:function(e,t,n){var content=n(240);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("bcf895dc",content,!0,{sourceMap:!1})},215:function(e,t,n){var content=n(242);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("198c267b",content,!0,{sourceMap:!1})},237:function(e,t,n){"use strict";var r=n(213);n.n(r).a},238:function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".meeting-card{height:100%;background:#fff;box-shadow:0 0 5px rgba(0,0,0,.1);border-radius:4px;-webkit-transition:box-shadow .3s;transition:box-shadow .3s}.meeting-card:hover{box-shadow:0 0 10px rgba(0,0,0,.1)}.meeting-card__action-panel{position:absolute;top:10px;right:10px;z-index:2}.meeting-card__content{padding:20px;-webkit-transform:translateZ(0);transform:translateZ(0)}.meeting-card__title-wrapper{margin:16px 0}.meeting-card__title{padding:4px 0;border-radius:4px}.meeting-card__title[contenteditable=true]{outline:none;background:#f1f1f1;padding-right:1.5em}.meeting-card__datetime{margin:16px 0}.meeting-card__save-btn{position:absolute;top:4px;right:4px;z-index:1}.meeting-card__users{margin-top:24px;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:start;align-items:flex-start}@media only screen and (min-width:768px){.meeting-card__users{flex-wrap:nowrap}}.meeting-card__users-icon{-webkit-box-flex:0;flex:0 0 1em;font-size:20px;margin-bottom:.5em}@media only screen and (min-width:768px){.meeting-card__users-icon{margin-bottom:0;margin-right:.5em}}.meeting-card__users-list{-webkit-box-flex:1;flex:1 1 100%}@media only screen and (min-width:768px){.meeting-card__users-list{max-width:calc(100% - 30px)}}.meeting-card__user{margin-bottom:.5em}",""])},239:function(e,t,n){"use strict";var r=n(214);n.n(r).a},240:function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".meeting-add__field{margin-bottom:16px}.meeting-add__double-field{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row nowrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:baseline;align-items:baseline}.meeting-add__double-field .meeting-add__field{-webkit-box-flex:0;flex:0 0 calc(50% - 10px)}.meeting-add__form-btns{margin-top:32px;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row nowrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.meeting-add__form-btn{-webkit-box-flex:0;flex:0 0 calc(50% - 10px)}",""])},241:function(e,t,n){"use strict";var r=n(215);n.n(r).a},242:function(e,t,n){(e.exports=n(11)(!1)).push([e.i,".page--meetings .meetings{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row nowrap;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:stretch;align-items:stretch;background:#f5f5f5}@media only screen and (min-width:1024px){.page--meetings .meetings{height:100%}.page--meetings .meetings>.vb{width:100%;height:100%}}.page--meetings .meetings__content{padding:20px;min-width:calc(100vw - 60px);min-height:100vh}@media only screen and (min-width:768px){.page--meetings .meetings__content{min-width:calc(100vw - 80px)}}.page--meetings .meetings__action-btn{position:fixed;z-index:3;right:20px;bottom:20px;box-shadow:0 0 5px rgba(0,0,0,.5)}.page--meetings .meetings__action-btn:hover{box-shadow:0 0 10px rgba(0,0,0,.2)}@media only screen and (min-width:768px){.page--meetings .meetings__action-btn{right:40px;bottom:40px}}",""])},247:function(e,t,n){"use strict";n.r(t);var r=n(88),o=(n(19),n(10),n(8),n(7),n(16),n(4)),c=n(204),d=n(205),l=n(220);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={name:"MeetingCard",components:{MeetingPeriod:c.a,MeetingState:d.a,UserSimple:l.d},props:{meeting:{type:Object,required:!0}},computed:{users:function(){return this.$store.getters["users/getByMeetingId"](this.meeting.id)},isValid:function(){return this.editable&&this.upd.theme.length}},data:function(){return{editable:!1,upd:{theme:""}}},methods:{edit:function(){this.editable=!0,this.upd.theme=this.meeting.theme},update:function(e){this.upd.theme=e.target.innerText.trim()},save:function(){this.isValid&&(this.updateInStore({id:this.meeting.id,props:f({},this.upd)}),this.editable=!1)},cancel:function(){this.editable&&(this.upd.theme="",this.editable=!1,this.$refs.editable.innerText=this.meeting.theme)},del:function(){this.deleteFromStore(this.meeting.id)},updateInStore:function(e){this.$store.dispatch("meetings/update",e)},deleteFromStore:function(e){this.$store.dispatch("meetings/delete",e)}}},_=(n(237),n(2)),x=Object(_.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meeting-card"},[n("base-action-panel",{staticClass:"meeting-card__action-panel"},[n("base-button",{attrs:{theme:"light",icon:"edit",shape:"square"},on:{click:e.edit}}),e._v(" "),n("base-button",{attrs:{shape:"square",theme:"danger",icon:"delete"},on:{click:e.del}})],1),e._v(" "),n("div",{staticClass:"meeting-card__content"},[n("meeting-state",{staticClass:"meeting-card__state",attrs:{state:e.meeting.state,id:e.meeting.id,start:e.meeting.start,end:e.meeting.end}}),e._v(" "),n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.cancel,expression:"cancel"}],staticClass:"meeting-card__title-wrapper"},[n("div",{ref:"editable",staticClass:"meeting-card__title tp-heading--medium",attrs:{contenteditable:e.editable},on:{input:e.update,keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()},keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancel(t)}]}},[e._v("\n        "+e._s(e.meeting.theme)+"\n      ")]),e._v(" "),e.editable?n("base-button",{staticClass:"meeting-card__save-btn",attrs:{theme:"primary",icon:"save",shape:"square",disabled:!e.isValid},on:{click:e.save}}):e._e()],1),e._v(" "),n("meeting-period",{staticClass:"meeting-card__datetime",attrs:{start:e.meeting.start,end:e.meeting.end}}),e._v(" "),n("div",{staticClass:"meeting-card__users"},[n("svg-icon",{staticClass:"meeting-card__users-icon",attrs:{name:"users"}}),e._v(" "),n("div",{staticClass:"meeting-card__users-list"},e._l(e.users,(function(e){return n("user-simple",{key:e.id,staticClass:"meeting-card__user",attrs:{name:e.firstName+" "+e.lastName,role:e.role}})})),1)],1)],1)],1)}),[],!1,null,null,null).exports,v=(n(218),n(109));function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var k={name:"MeetingAdd",props:{active:Boolean},computed:{freeUsers:function(){return this.$store.getters.getFreeUsersByDate(this.normalizedMeeting.start,this.normalizedMeeting.end).map((function(e){return{name:"".concat(e.firstName," ").concat(e.lastName),id:e.id}}))},freeUsersFiltered:function(){var e=this;return this.freeUsers.filter((function(t){var n=!0;return e.meeting.facilitator&&t.id===e.meeting.facilitator.id&&(n=!1),e.meeting.secretary&&t.id===e.meeting.secretary.id&&(n=!1),n}),this)},normalizedMeeting:function(){return{theme:this.meeting.theme.trim(),start:Date.parse(this.meeting.start),end:Date.parse(this.meeting.end)}},normalizedUsers:function(){return[{id:this.meeting.facilitator.id,role:"facilitator"},{id:this.meeting.secretary.id,role:"secretary"}].concat(Object(v.a)(this.meeting.users.map((function(e){return{id:e.id}}))))},isValid:function(){return this.normalizedMeeting.theme.length&&this.normalizedMeeting.start&&this.normalizedMeeting.end&&this.normalizedMeeting.end>this.normalizedMeeting.start&&this.meeting.facilitator&&this.meeting.secretary}},data:function(){return{meeting:{theme:"",start:"",end:"",facilitator:"",secretary:"",users:[]}}},methods:{clear:function(){this.meeting={theme:"",start:"",end:"",facilitator:"",secretary:"",users:[]}},cancel:function(){this.close(),this.clear()},close:function(){this.$emit("update:active",!1)},submit:function(){this.isValid&&(this.add(),this.close(),this.clear())},add:function(){this.addToStore({meeting:w({},this.meeting,{},this.normalizedMeeting),users:Object(v.a)(this.normalizedUsers)})},addToStore:function(e){this.$store.dispatch("meetings/add",e)}},watch:{freeUsers:function(){this.meeting.facilitator="",this.meeting.secretary="",this.meeting.users=[]}}},O=(n(239),Object(_.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("base-popup",{attrs:{active:e.active},on:{"update:active":function(t){e.active=t},close:e.cancel},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("Add meeting")]},proxy:!0}])},[e._v(" "),n("div",{staticClass:"meeting-add"},[n("form",{staticClass:"meeting-add__form",attrs:{novalidate:"true"},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[n("base-input",{staticClass:"meeting-add__field",attrs:{label:"Theme",required:"",focused:""},model:{value:e.meeting.theme,callback:function(t){e.$set(e.meeting,"theme",t)},expression:"meeting.theme"}}),e._v(" "),n("div",{staticClass:"meeting-add__double-field"},[n("base-datetime",{staticClass:"meeting-add__field",attrs:{label:"Start date","minute-step":5,required:""},model:{value:e.meeting.start,callback:function(t){e.$set(e.meeting,"start",t)},expression:"meeting.start"}}),e._v(" "),n("base-datetime",{staticClass:"meeting-add__field",attrs:{label:"End date","minute-step":5,required:""},model:{value:e.meeting.end,callback:function(t){e.$set(e.meeting,"end",t)},expression:"meeting.end"}})],1),e._v(" "),n("base-select",{key:1,staticClass:"meeting-add__field",attrs:{label:"Facilitator",options:e.freeUsersFiltered,as:"name",required:""},model:{value:e.meeting.facilitator,callback:function(t){e.$set(e.meeting,"facilitator",t)},expression:"meeting.facilitator"}}),e._v(" "),n("base-select",{key:2,staticClass:"meeting-add__field",attrs:{label:"Secretary",options:e.freeUsersFiltered,as:"name",required:""},model:{value:e.meeting.secretary,callback:function(t){e.$set(e.meeting,"secretary",t)},expression:"meeting.secretary"}}),e._v(" "),n("base-select",{key:3,staticClass:"meeting-add__field",attrs:{label:"Users",options:e.freeUsersFiltered,as:"name",multiple:""},model:{value:e.meeting.users,callback:function(t){e.$set(e.meeting,"users",t)},expression:"meeting.users"}}),e._v(" "),n("div",{staticClass:"meeting-add__form-btns"},[n("base-button",{staticClass:"meeting-add__form-btn",attrs:{type:"submit",disabled:!e.isValid}},[e._v("Submit")]),e._v(" "),n("base-button",{staticClass:"meeting-add__form-btn",attrs:{type:"reset",theme:"light"},on:{click:function(t){return t.stopPropagation(),e.cancel(t)}}},[e._v("Cancel")])],1)],1)])])}),[],!1,null,null,null).exports),j={name:"Meetings",components:{EmptyPage:r.b,FlipList:r.c,MeetingAdd:O,MeetingCard:x},computed:{meetings:function(){return this.$store.state.meetings.list}},data:function(){return{addingMeeting:!1}},methods:{addMeeting:function(){this.addingMeeting=!0}}},C=(n(241),Object(_.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page page--meetings"},[e.meetings.length?n("div",{staticClass:"meetings"},[n("div",{directives:[{name:"bar",rawName:"v-bar"}]},[n("div",{staticClass:"vb-content"},[n("div",{staticClass:"meetings__content"},[n("flip-list",{attrs:{list:e.meetings,mode:"grid"},scopedSlots:e._u([{key:"item",fn:function(e){var t=e.item;return[n("meeting-card",{attrs:{meeting:t}})]}}],null,!1,1682358114)})],1)])])]):n("empty-page",{scopedSlots:e._u([{key:"title",fn:function(){return[n("h2",[e._v("Sorry, there are no meetings found!")])]},proxy:!0}])},[e._v(" "),n("p",[e._v("Press big blue button to add")])]),e._v(" "),n("base-button",{staticClass:"meetings__action-btn",attrs:{shape:"circle",size:"big"},on:{click:e.addMeeting}},[n("svg-icon",{attrs:{name:"add"}})],1),e._v(" "),n("meeting-add",{attrs:{active:e.addingMeeting},on:{"update:active":function(t){e.addingMeeting=t}}})],1)}),[],!1,null,null,null));t.default=C.exports}}]);